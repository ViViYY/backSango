{"version":3,"sources":["loginScene.js"],"names":["cc","Class","extends","Component","properties","anim1","default","type","Animation","prefabRegisterNode","Prefab","usernameLabel","EditBox","passwordLabel","tipsLabel","Label","onLoad","play","gameConfig","defines","string","_resList","i","push","GameData","ResourceManager","loadList","console","log","JSON","stringify","socket","init","onEnterGame","data","accountData","manorData","setAccountData","director","loadScene","onButtonLogin","event","customData","username","password","length","node","opacity","runAction","fadeOut","login","err","onButtonRegister","registerNode","instantiate","parent"],"mappings":"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","file":"loginScene.js","sourceRoot":"../../../../../assets/Script/loginScene","sourcesContent":["import Global from './../global'\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        anim1: {\n            default: null,\n            type: cc.Animation\n        },\n        prefabRegisterNode: {\n            default: null,\n            type: cc.Prefab\n        },\n        usernameLabel: {\n            default: null,\n            type: cc.EditBox\n        },\n        passwordLabel: {\n            default: null,\n            type: cc.EditBox\n        },\n        tipsLabel: {\n            default: null,\n            type: cc.Label\n        },\n    },\n    onLoad () {\n        this.anim1.play('welcome');\n        let gameConfig = defines.gameConfig;\n        this.usernameLabel.string = 'qxw19861';\n        this.passwordLabel.string = '12341234';\n        // console.log('gameConfig : ' + JSON.stringify(gameConfig));\n        let _resList = [];\n        for (let i in gameConfig){\n            _resList.push(gameConfig[i]);\n        }\n        Global.GameData.ResourceManager.loadList(_resList, function () {\n            console.log(' resource : ' + JSON.stringify(Global.GameData.ResourceManager));\n            Global.socket.init();\n        });\n        Global.socket.onEnterGame((data)=> {\n            // 登陆回掉\n            console.log(' on login game data : ');\n            let accountData = data.data.accountData;\n            let manorData = data.data.manorData;\n            console.log(' account data : ' + JSON.stringify(accountData));\n            console.log(' manor data : ' + JSON.stringify(manorData));\n            Global.GameData.setAccountData(accountData);\n            cc.director.loadScene('gameScene');\n        });\n    },\n    onButtonLogin (event, customData) {\n        console.log('loginScene:onButtonLogin , customData = ' + customData);\n        let username = this.usernameLabel.string;\n        let password = this.passwordLabel.string;\n        if(username.length < 3){\n            this.tipsLabel.node.opacity = 255;\n            this.tipsLabel.string = \"username length must big than 3 \";\n            this.tipsLabel.node.runAction(cc.fadeOut(3));\n            return;\n        }\n        if(password.length < 6){\n            this.tipsLabel.node.opacity = 255;\n            this.tipsLabel.string = \"username length must big than 6 \";\n            this.tipsLabel.node.runAction(cc.fadeOut(3));\n            return;\n        }\n        Global.socket.login({username: username, password: password}, (err, data)=> {\n            if(err){\n                console.log(' login err : ' + err);\n                this.tipsLabel.node.opacity = 255;\n                this.tipsLabel.string = err;\n                this.tipsLabel.node.runAction(cc.fadeOut(3));\n            } else {\n                // console.log(' login data : ' + JSON.stringify(data));\n            }\n        });\n    },\n    onButtonRegister (event, customData) {\n        console.log('loginScene:onButtonRegister , customData = ' + customData);\n        let registerNode = cc.instantiate(this.prefabRegisterNode);\n        registerNode.parent = this.node;\n    },\n\n});\n"]}